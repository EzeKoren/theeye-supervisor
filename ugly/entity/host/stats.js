"use strict";var Schema=require("mongoose").Schema,mongodb=require("../../lib/mongodb"),date=new Date,EntitySchema=Schema({host_id:{type:String},customer_name:{type:String,index:!0},creation_date:{type:Date,default:date},last_update:{type:Date,default:date},last_update_timestamp:{type:Number,default:date.getTime()},type:{type:String},stats:{}});EntitySchema.methods.publish=function(e){return{id:this.id,host_id:this.host_id,type:this.type,stats:this.stats}},EntitySchema.statics.create=function(e,t,r,o){var n=new Entity({host_id:e._id,customer_name:e.customer_name,type:t,stats:r});n.save(function(){o&&o(null,n)})},EntitySchema.statics.findOneByHostAndType=function(e,t,r){this.findOne({host_id:e,type:t},function(e,t){e?(console.error(e),r&&r(e,null)):null==t?r&&r(!1,null):r&&r(null,t)})};var name="HostStats",Entity=mongodb.db.model(name,EntitySchema);exports.Entity=Entity;
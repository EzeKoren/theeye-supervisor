"use strict";function BaseSchema(e){Schema.call(this,util._extend({name:{type:String,default:""},creation_date:{type:Date,default:Date.now},last_update:{type:Date,default:null},enable:{type:Boolean,default:!0},customer:{type:Schema.Types.ObjectId,ref:"Customer"},secret:{type:String,default:function(){return crypto.createHmac("sha256","THEEYE"+Math.random()).update((new Date).toISOString()).digest("hex")}}},e),{collection:"events",discriminatorKey:"_type"}),this.virtual("id").get(function(){return this._id.toHexString()});var t={getters:!0,virtuals:!0,transform:function(e,t,r){t.id=t._id,delete t._id,delete t.__v}};return this.set("toJSON",t),this.set("toObject",t),this.pre("save",function(e){this.last_update=new Date,e()}),this}var crypto=require("crypto"),util=require("util"),Schema=require("mongoose").Schema;util.inherits(BaseSchema,Schema),module.exports=BaseSchema;
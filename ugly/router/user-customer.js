"use strict";var debug=require("debug")("eye:router:middleware:customer");module.exports=function(e,t,r){var o=e.customer,n=e.user;if(!o){var i=new Error("customer is not present or not initialized");i.statusCode=500,r(i)}if(!n){var i=new Error("user is not present or not initialized");i.statusCode=500,r(i)}var s=n.customers.map(function(e){return e.name}).indexOf(o.name);if(s===-1){var i=new Error("you are not allowed to access this organization");return i.statusCode=403,r(i)}return r()};
"use strict";var config=require("config"),nodemailer=require("nodemailer"),mailercfg=config.get("mailer"),trType=mailercfg.transport.type,options=mailercfg.transport.options||{};switch(trType){case"ses":var transport=require("nodemailer-ses-transport")(options);break;case"sendmail":var transport=require("nodemailer-sendmail-transport")(options);break;case"smtp":var transport=require("nodemailer-smtp-transport")(options);break;default:var msg="nodemailer transport "+trType+" not implemented.";throw new Error(msg)}var transporter=nodemailer.createTransport(transport);module.exports={sendMail:function(e,t){var r=mailercfg,o=r.from.replace(/%customer%/g,e.customer_name);e.from=o,e.replyTo=r.reply_to,r.only_support||!e.to?e.to=r.support.join(","):r.include_support_bcc&&(e.bcc=r.support.join(",")),transporter.sendMail(e,t)}};
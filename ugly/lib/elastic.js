"use strict";var config=require("config"),debug=require("debug")("eye::elastic"),path=require("path"),request=require("request").defaults({timeout:5e3,json:!0,gzip:!0}),ElasticSearch={submit:function(e,t,r){var o=config.elasticsearch.keys.prefix;if(o&&(t=o+t),!config.elasticsearch.enabled)return void debug("elastic search disabled by config");var n=config.elasticsearch;if(!n.url||!n.db)return debug("ERROR invalid elasticsearch configuration.");r.type=t,r.timestamp||(r.timestamp=(new Date).getTime()),r.date||(r.date=(new Date).toISOString());var i=n.url+"/"+path.join(e,t);request.post({url:i,body:r},function(e,t,r){return e?(debug("ERROR %s",e),void debug(arguments)):void debug("submit done to %s",i)})}};module.exports=ElasticSearch;
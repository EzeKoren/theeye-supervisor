"use strict";var config=require("config"),notification=require("../service/notification"),ErrorHandler=function(){function e(e){var t=(e.message,e.statusCode),r="<h2>Exception</h2>";return r+="<pre>"+e.stack+"</pre>\n",t&&(r+="<p>status code : "+t+"</p>"),r}var t=[];return this.required=function(e,r){var o=new Error(e+" is required");return o.statusCode=400,o.field=e,o.value=r,t.push(o),o},this.invalid=function(e,r){var o=new Error(e+" is invalid");return o.statusCode=400,o.field=e,o.value=r,t.push(o),o},this.toString=function(){for(var e=[],r=0;r<t.length;r++)e.push({message:t[r].message,status:t[r].statusCode,value:t[r].value,field:t[r].field});return e},this.toJSON=this.toString,this.toHtml=function(){for(var r=[],o=0;o<t.length;o++)r.push(e(t[o]));return r.join("<br/>")},this.hasErrors=function(){return t.length>0},this.sendExceptionAlert=function(e){t.push(e),notification.sendEmailNotification({customer_name:"theeye",subject:"Supervisor Exception",to:config.support,content:this.toHtml()})},this};module.exports=ErrorHandler;
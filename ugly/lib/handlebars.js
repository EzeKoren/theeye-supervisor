"use strict";var Handlebars=require("handlebars"),fs=require("fs"),config=require("config").get("system"),templatePath=config.view_teamplates_path,header=fs.readFileSync(templatePath+"/email/header.hbs",{encoding:"utf8"});Handlebars.registerPartial("email_header",Handlebars.compile(header));var footer=fs.readFileSync(templatePath+"/email/footer.hbs",{encoding:"utf8"});Handlebars.registerPartial("email_footer",Handlebars.compile(footer)({web_url:config.web_url})),module.exports={render:function(e,t,r){this.getTemplate(e,function(e){var o=Handlebars.compile(e);r&&r(o(t))})},getFileByName:function(e){return templatePath+"/"+e+".hbs"},getTemplate:function(e,t){var r=this.getFileByName(e);fs.readFile(r,{encoding:"utf8"},function(e,r){if(e)throw e;t&&t(r)})}};